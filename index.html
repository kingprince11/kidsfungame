<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ultimate Fun Learning Game</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(120deg, #fceabb, #f8b500);
      text-align: center;
      margin: 0; padding: 0;
    }
    h1, h2 { color: #333; }
    .hidden { display: none; }
    .menu, .mode, .overlay {
      padding: 20px;
    }
    button {
      margin: 10px;
      padding: 12px 20px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: #ff6f61;
      color: white;
      transition: 0.3s;
    }
    button:hover { background: #ff3d2e; }
    #drawBoard { border: 2px dashed #333; width: 80%; height: 250px; margin: 10px auto; display: block; }
    #traceChar { font-size: 80px; margin: 10px; }
    .score { font-size: 20px; margin-top: 15px; }
    #feedback, #dictFeedback, #spellFeedback { font-weight: bold; }
  </style>
</head>
<body>
  <!-- üéµ Background Music -->
  <audio id="bgMusic" loop>
    <source src="happy-kids-music-323172.mp3" type="audio/mpeg">
  </audio>

  <!-- Start Screen -->
  <div id="startScreen" class="menu">
    <h1>üéÆ Ultimate Fun Learning Game üéâ</h1>
    <button onclick="startGame()">‚ñ∂Ô∏è Start Game</button>
  </div>

  <!-- Main Menu -->
  <div id="mainMenu" class="menu hidden">
    <h2>Choose Your Adventure</h2>
    <button onclick="setMode('trace')">üé® Tracing</button>
    <button onclick="setMode('math')">‚ûï Math Adventure</button>
    <button onclick="setMode('dictation')">üé§ Dictation</button>
    <button onclick="setMode('spelling')">üß© Spelling</button>
    <button onclick="toggleMusic()">üéµ Music</button>
  </div>

  <!-- Tracing Mode -->
  <div id="traceMode" class="mode hidden">
    <h2>üé® Tracing Mode</h2>
    <div id="traceChar">A</div>
    <canvas id="drawBoard"></canvas>
    <div>
      <button onclick="showLetter()">Letter</button>
      <button onclick="showNumber()">Number</button>
      <button onclick="nextChar()">Next</button>
      <button onclick="clearBoard()">Clear</button>
    </div>
    <button onclick="backToMenu()">‚¨ÖÔ∏è Back</button>
  </div>

  <!-- Math Mode -->
  <div id="mathMode" class="mode hidden">
    <h2>‚ûï Math Adventure</h2>
    <p id="mathQuestion">5 + 3 = ?</p>
    <input id="mathAnswer" type="text" placeholder="Answer here">
    <div>
      <button onclick="checkMath()">Check</button>
    </div>
    <p id="feedback"></p>
    <p class="score">‚≠ê Score: <span id="mathScore">0</span></p>
    <button onclick="backToMenu()">‚¨ÖÔ∏è Back</button>
  </div>

  <!-- Dictation Mode -->
  <div id="dictationMode" class="mode hidden">
    <h2>üé§ Dictation Mode</h2>
    <button onclick="newDictation()">‚ñ∂Ô∏è Hear Word</button>
    <input id="dictAnswer" type="text" placeholder="Type what you heard">
    <button onclick="checkDictation()">Check</button>
    <p id="dictFeedback"></p>
    <p class="score">‚≠ê Score: <span id="dictScore">0</span></p>
    <button onclick="backToMenu()">‚¨ÖÔ∏è Back</button>
  </div>

  <!-- Spelling Mode -->
  <div id="spellingMode" class="mode hidden">
    <h2>üß© Spelling Challenge</h2>
    <p id="spellQuestion"></p>
    <input id="spellAnswer" type="text" placeholder="Fill in the missing letters">
    <button onclick="checkSpelling()">Check</button>
    <p id="spellFeedback"></p>
    <p class="score">‚≠ê Score: <span id="spellScore">0</span></p>
    <button onclick="backToMenu()">‚¨ÖÔ∏è Back</button>
  </div>

<script>
  // üéµ Music
  let isPlaying=false;
  const bgMusic=document.getElementById("bgMusic");
  function startGame(){ document.getElementById("startScreen").classList.add("hidden"); document.getElementById("mainMenu").classList.remove("hidden"); bgMusic.play(); isPlaying=true; }
  function toggleMusic(){ if(isPlaying){bgMusic.pause();isPlaying=false;}else{bgMusic.play();isPlaying=true;} }

  // üîÄ Mode Switch
  function setMode(mode){
    ["traceMode","mathMode","dictationMode","spellingMode"].forEach(id=>document.getElementById(id).classList.add("hidden"));
    document.getElementById("mainMenu").classList.add("hidden");
    if(mode==="trace") document.getElementById("traceMode").classList.remove("hidden");
    if(mode==="math"){ document.getElementById("mathMode").classList.remove("hidden"); newMath(); }
    if(mode==="dictation"){ document.getElementById("dictationMode").classList.remove("hidden"); newDictation(); }
    if(mode==="spelling"){ document.getElementById("spellingMode").classList.remove("hidden"); newSpelling(); }
  }
  function backToMenu(){ ["traceMode","mathMode","dictationMode","spellingMode"].forEach(id=>document.getElementById(id).classList.add("hidden")); document.getElementById("mainMenu").classList.remove("hidden"); }

  // üé® Tracing Mode
  const letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""), numbers="0123456789".split("");
  const traceChar=document.getElementById("traceChar");
  const canvas=document.getElementById("drawBoard"), ctx=canvas.getContext("2d");
  function resizeCanvas(){canvas.width=canvas.offsetWidth;canvas.height=canvas.offsetHeight;}
  window.onload=resizeCanvas; window.onresize=resizeCanvas;
  let drawing=false;
  function startDraw(){drawing=true;} function stopDraw(){drawing=false;}
  function draw(e){if(!drawing)return; e.preventDefault(); let r=canvas.getBoundingClientRect(); let x=(e.touches?e.touches[0].clientX:e.clientX)-r.left; let y=(e.touches?e.touches[0].clientY:e.clientY)-r.top; ctx.fillStyle="blue"; ctx.beginPath(); ctx.arc(x,y,5,0,Math.PI*2); ctx.fill();}
  canvas.addEventListener("mousedown",startDraw); canvas.addEventListener("mouseup",stopDraw); canvas.addEventListener("mousemove",draw);
  canvas.addEventListener("touchstart",startDraw); canvas.addEventListener("touchend",stopDraw); canvas.addEventListener("touchmove",draw);
  function showLetter(){traceChar.textContent=letters[Math.floor(Math.random()*letters.length)];clearBoard();}
  function showNumber(){traceChar.textContent=numbers[Math.floor(Math.random()*numbers.length)];clearBoard();}
  function nextChar(){Math.random()>0.5?showLetter():showNumber();}
  function clearBoard(){ctx.clearRect(0,0,canvas.width,canvas.height);}

  // ‚ûï Math Adventure
  let mathScore=0, correctAnswer=0;
  function newMath(){ let a=Math.floor(Math.random()*20), b=Math.floor(Math.random()*20), ops=["+","-","√ó","√∑"], op=ops[Math.floor(Math.random()*ops.length)]; if(op==="+"){correctAnswer=a+b; mathQuestion.textContent=`${a} + ${b} = ?`;} else if(op==="-"){correctAnswer=a-b; mathQuestion.textContent=`${a} - ${b} = ?`;} else if(op==="√ó"){correctAnswer=a*b; mathQuestion.textContent=`${a} √ó ${b} = ?`;} else{b=b||1;correctAnswer=a; mathQuestion.textContent=`${a*b} √∑ ${b} = ?`;} feedback.textContent=""; mathAnswer.value=""; }
  function checkMath(){ let ans=parseInt(mathAnswer.value); if(ans===correctAnswer){feedback.textContent="‚úÖ Correct!"; feedback.style.color="green"; mathScore++;} else {feedback.textContent=`‚ùå Wrong (Ans: ${correctAnswer})`; feedback.style.color="red";} document.getElementById("mathScore").textContent=mathScore; setTimeout(newMath,1000); }

  // üé§ Dictation
  const dictWords=["apple","school","banana","happy","elephant","friend","computer","number","teacher","game"];
  let currentWord="", dictScore=0;
  function speak(t){ let m=new SpeechSynthesisUtterance(t); m.lang="en-US"; speechSynthesis.speak(m); }
  function newDictation(){ currentWord=dictWords[Math.floor(Math.random()*dictWords.length)]; speak(currentWord); dictFeedback.textContent=""; dictAnswer.value=""; }
  function checkDictation(){ if(dictAnswer.value.trim().toLowerCase()===currentWord){dictFeedback.textContent="‚úÖ Correct!"; dictFeedback.style.color="green"; dictScore++;} else {dictFeedback.textContent=`‚ùå It was "${currentWord}"`; dictFeedback.style.color="red";} document.getElementById("dictScore").textContent=dictScore; setTimeout(newDictation,1500); }

  // üß© Spelling
  const spellWords=["cat","dog","apple","train","house","school","pencil","garden","river"];
  let currentSpell="", missing="", spellScore=0;
  function newSpelling(){ currentSpell=spellWords[Math.floor(Math.random()*spellWords.length)]; let i=Math.floor(Math.random()*currentSpell.length); missing=currentSpell[i]; let puzzle=currentSpell.slice(0,i)+"_" + currentSpell.slice(i+1); spellQuestion.textContent=`Word: ${puzzle}`; spellAnswer.value=""; spellFeedback.textContent=""; }
  function checkSpelling(){ if(spellAnswer.value.trim().toLowerCase()===missing){spellFeedback.textContent="‚úÖ Correct!"; spellFeedback.style.color="green"; spellScore++;} else {spellFeedback.textContent=`‚ùå The missing letter was '${missing}'`; spellFeedback.style.color="red";} document.getElementById("spellScore").textContent=spellScore; setTimeout(newSpelling,1500); }
</script>
</body>
</html>
